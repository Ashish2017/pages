kind: PersistentVolume
apiVersion: v1
metadata:
  name: log-persistent-volume
  namespace: demo
  labels:
    type: local
spec:
  volumeMode: Filesystem
  storageClassName: demo
  capacity:
    storage: 500Mi
  accessModes:
    - ReadWriteOnce
  hostPath:
    path: "/usr/logs"
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: log-persistent-claim
  namespace: demo
spec:
  volumeMode: Filesystem
  storageClassName: demo
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 500Mi
---
apiVersion: v1
kind: Pod
metadata:
  labels:
    app: pages
  name: pages
  namespace: demo
spec:
  volumes:
  - name: log-volume
    persistentVolumeClaim:
      claimName: log-persistent-claim
  containers:
  - image: adityapratapbhuyan/kube-pages-app:basic
    name: pages
    volumeMounts:
      - name: log-volume
        mountPath: "/var/tmp/"
    env:
    - name: spring.jpa.hibernate.ddl-auto
      value: "update"
    - name: management.endpoint.health.show-details
      value: "always"
    - name: management.endpoints.web.exposure.include
      value: "*"
    - name: logging.file.name
      value: "/var/tmp/kube-pages-workshop-${HOSTNAME}.log"
    ports:
    - containerPort: 8080
    resources: {}
  dnsPolicy: ClusterFirst
  restartPolicy: Never
status: {}
